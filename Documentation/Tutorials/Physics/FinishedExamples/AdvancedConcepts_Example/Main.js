"use strict";
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
var Tutorials_FUDGEPhysics_Lesson1;
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
(function (Tutorials_FUDGEPhysics_Lesson1) {
    var f = FudgeCore;
    //GOALS: Learning how to define shpes to create a not predefined collider shape.
    //Built a simple physical player like you would find in a adventure or 3d platformer.
    //Hint! -> These concepts are only a basic start, expand on it yourself to improve on results.
    //Fudge Basic Variables
    window.addEventListener("load", init);
    const app = document.querySelector("canvas"); // The html element where the scene is drawn to
    let viewPort; // The scene visualization
    let hierarchy; // You're object scene tree
    //Physical Objects
    let bodies = new Array(); // Array of all physical objects in the scene to have a quick reference
    let player;
    let playerBody;
    //Setting Variables
    let materialConvexShape = new f.Material("MorningStarThingy", f.ShaderFlat, new f.CoatColored(new f.Color(0.5, 0.4, 0.35, 1)));
    let materialPlayer = new f.Material("Player", f.ShaderFlat, new f.CoatColored(new f.Color(0.7, 0.8, 0.6, 1)));
    let environmentMat = new f.Material("Environment", f.ShaderFlat, new f.CoatColored(new f.Color(0.2, 0.2, 0.2, 1)));
    //Physical Player Variables
    let isGrounded;
    let movementspeed = 8;
    let turningspeed = 80;
    let playerWeight = 75;
    let playerJumpForce = 500;
    let cmpCamera; //We let the camera look at our player in update
    let yTurn = 0; //How high the turning input currently is
    let forwardMovement = 0; //How high the forward movement input currently is
    //Function to initialize the Fudge Scene with a camera, light, viewport and PHYSCIAL Objects
    function init(_event) {
        hierarchy = new f.Node("Scene"); //create the root Node where every object is parented to. Should never be changed
        //#region PHYSICS
        //OimoPhysics which is integrated in Fudge is using a correctionAlgorithm on solver iterations instead of fully recalculate physics too often, 
        //so you can crank the number of solver iterations higher than with most engines. But Oimo is in general less accurate.
        //This is not needed but we just do it to show it.
        f.Physics.world.setSolverIterations(1000);
        f.Physics.settings.defaultRestitution = 0.15;
        f.Physics.settings.defaultFriction = 0.8;
        //PHYSICS 
        //Creating a physically static ground plane for our physics playground. A simple scaled cube but with physics type set to static
        bodies[0] = createCompleteNode("Ground", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[0].mtxLocal.scale(new f.Vector3(14, 0.3, 14)); //Scale the body with it's standard ComponentTransform
        //bodies[0].mtxLocal.rotateX(4, true); //Give it a slight rotation so the physical objects are sliding, always from left when it's after a scaling
        hierarchy.appendChild(bodies[0]); //Add the node to the scene by adding it to the scene-root
        //CONCEPT 1 - Convex Colliders / Compound Collider - A Collider Shape that is not predefined and has no holes in it
        //e.g. something like a morning star shape a cube with pyramides as spikes on the side
        createConvexCompountCollider();
        //CONCEPT 2 - Setting Up a physical player
        //A physical player is a standard physical object of the type dynamic, BUT, you only want to rotate on Y axis, and you want to setup things
        //like a grounded variable and other movement related stuff.
        settingUpAPlayer();
        //Setting up some environment objects for our player to jump on
        bodies[100] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[100].mtxLocal.translate(new f.Vector3(5, 1, 3));
        bodies[100].mtxLocal.scale(new f.Vector3(1, 1, 1));
        //bodies[100].mtxLocal.rotateX(4, true); 
        hierarchy.appendChild(bodies[100]); //Add the node to the scene by adding it to the scene-root
        bodies[101] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[101].mtxLocal.translate(new f.Vector3(-3, 3.5, 2));
        bodies[101].mtxLocal.scale(new f.Vector3(1, 1, 5));
        bodies[101].mtxLocal.rotateX(40, true);
        hierarchy.appendChild(bodies[101]);
        /*Stairs, keep in mind our player is only able to walk up stars because he is a capsule but it's not easy for him because we do not lift any feet,
        we are just pushing a capsule with force against a slope until it's pushed up, which we make easier by giving the player a low friction, the way
        we set the player up he can not slide on the ground but it helps to get him up the stairs.
        So you need to turn around a little while moving to climb these stairs
        advanced stairwalking is something you need to figure out yourself. Keyword raycast is a good start.
        */
        let slopeHeight = 0.20;
        bodies[102] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[102].mtxLocal.translate(new f.Vector3(-3, slopeHeight, -2));
        bodies[102].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[102]);
        bodies[103] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[103].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 2, -2 - 0.35));
        bodies[103].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[103]);
        bodies[104] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[104].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 3, -2 - 0.35 * 2));
        bodies[104].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[104]);
        bodies[105] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[105].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 4, -2 - 0.35 * 3));
        bodies[105].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[105]);
        bodies[106] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[106].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 5, -2 - 0.35 * 4));
        bodies[106].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[106]);
        //#endregion PHYSICS
        //Standard Fudge Scene Initialization - Creating a directional light, a camera and initialize the viewport
        let cmpLight = new f.ComponentLight(new f.LightDirectional(f.Color.CSS("WHITE")));
        cmpLight.mtxPivot.lookAt(new f.Vector3(0.5, -1, -0.8)); //Set light direction
        hierarchy.addComponent(cmpLight);
        cmpCamera = new f.ComponentCamera();
        cmpCamera.clrBackground = f.Color.CSS("GREY");
        cmpCamera.mtxPivot.translate(new f.Vector3(17, 4, 17)); //Move camera far back so the whole scene is visible
        cmpCamera.mtxPivot.lookAt(f.Vector3.ZERO()); //Set the camera matrix so that it looks at the center of the scene
        viewPort = new f.Viewport(); //Creating a viewport that is rendered onto the html canvas element
        viewPort.initialize("Viewport", hierarchy, cmpCamera, app); //initialize the viewport with the root node, camera and canvas
        document.addEventListener("keypress", hndKey); //Adding a listener for keypress handling
        document.addEventListener("keyup", hndKeyUp); //Adding a listener for keyUp
        //PHYSICS - Start using physics by telling the physics the scene root object. Physics will recalculate every transform and initialize
        f.Physics.adjustTransforms(hierarchy);
        f.Physics.settings.debugDraw = true;
        //Important start the game loop after starting physics, so physics can use the current transform before it's first iteration
        f.Loop.addEventListener("loopFrame" /* LOOP_FRAME */, update); //Tell the game loop to call the update function on each frame
        f.Loop.start(); //Stard the game loop
    }
    //Function to animate/update the Fudge scene, commonly known as gameloop
    function update() {
        //PHYSICS - Simulate physical changes each frame, parameter to set time between frames
        f.Physics.world.simulate(f.Loop.timeFrameReal / 1000);
        //Player constant update functions do it after physics calculation is best practice
        cmpCamera.mtxPivot.lookAt(player.mtxWorld.translation);
        playerIsGroundedRaycast();
        playerMovement(f.Loop.timeFrameReal / 1000);
        viewPort.draw(); // Draw the current Fudge Scene to the canvas
    }
    // Function to quickly create a node with multiple needed FudgeComponents, including a physics component
    function createCompleteNode(_name, _material, _mesh, _mass, _physicsType, _group = f.PHYSICS_GROUP.DEFAULT, _colType = f.COLLIDER_TYPE.CUBE, _convexMesh = null) {
        let node = new f.Node(_name);
        let cmpMesh = new f.ComponentMesh(_mesh);
        let cmpMaterial = new f.ComponentMaterial(_material);
        let cmpTransform = new f.ComponentTransform();
        let cmpRigidbody = new f.ComponentRigidbody(_mass, _physicsType, _colType, _group, null, _convexMesh); //add a Float32 Array of points to the rb constructor to create a convex collider
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        node.addComponent(cmpRigidbody);
        return node;
    }
    function createConvexCompountCollider() {
        //Step 1 - define points that construct the shape you want for your collider - order is important so think about what point comes when in your shape
        let colliderVertices = new Float32Array([
            1, -1, 1,
            0, -2, 0,
            1, 1, 1,
            -1, 1, 1,
            -1, -1, 1,
            -2, 0, 0,
            1, 1, -1,
            -1, 1, -1,
            -1, -1, -1,
            0, 0, -2,
            1, -1, -1,
            2, 0, 0,
            0, 2, 0,
            0, 0, 2
        ]);
        //Step 2 - define the visual nodes that are part of your whole shape, since we have a cube that is surounded by pyramids:
        //Main Shape
        bodies[5] = createCompleteNode("Compound", materialConvexShape, new f.MeshCube(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.CONVEX, colliderVertices);
        hierarchy.appendChild(bodies[5]);
        bodies[5].mtxLocal.translate(new f.Vector3(2.5, 4, 3.5));
        bodies[5].mtxLocal.rotateX(27);
        bodies[5].mtxLocal.rotateY(32);
        //Components - Removing the Physics component on each of them since they all build one shape on the main Node only the visual nodes need to be there
        bodies[6] = createCompleteNode("CompoundUpper", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[6].removeComponent(bodies[6].getComponent(f.ComponentRigidbody));
        bodies[6].mtxLocal.translateY(0.5);
        bodies[6].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[6]); //appending the Node not to the main hierarchy but the Node it is part of
        bodies[7] = createCompleteNode("CompoundLower", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[7].removeComponent(bodies[7].getComponent(f.ComponentRigidbody));
        bodies[7].mtxLocal.rotateX(180);
        bodies[7].mtxLocal.translateY(0.5);
        bodies[7].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[7]);
        bodies[8] = createCompleteNode("CompoundLeft", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[8].removeComponent(bodies[8].getComponent(f.ComponentRigidbody));
        bodies[8].mtxLocal.rotateZ(90);
        bodies[8].mtxLocal.translateY(0.5);
        bodies[8].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[8]);
        bodies[9] = createCompleteNode("CompoundRight", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[9].removeComponent(bodies[9].getComponent(f.ComponentRigidbody));
        bodies[9].mtxLocal.rotateZ(-90);
        bodies[9].mtxLocal.translateY(0.5);
        bodies[9].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[9]);
        bodies[10] = createCompleteNode("CompoundFront", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[10].removeComponent(bodies[10].getComponent(f.ComponentRigidbody));
        bodies[10].mtxLocal.rotateX(90);
        bodies[10].mtxLocal.translateY(0.5);
        bodies[10].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[10]);
        bodies[11] = createCompleteNode("CompoundBack", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[11].removeComponent(bodies[11].getComponent(f.ComponentRigidbody));
        bodies[11].mtxLocal.rotateX(-90);
        bodies[11].mtxLocal.translateY(0.5);
        bodies[11].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[11]);
        bodies[5].getComponent(f.ComponentRigidbody).restitution = 3;
    }
    //Setting up a physical player which is nothign but a cube but able to platform in our little world and reacting to stuff
    function settingUpAPlayer() {
        player = createCompleteNode("Player", materialPlayer, new f.MeshCube(), playerWeight, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.CAPSULE);
        hierarchy.appendChild(player);
        playerBody = player.getComponent(f.ComponentRigidbody);
        player.mtxLocal.scale(new f.Vector3(0.5, 1.8, 0.3));
        player.mtxLocal.translate(new f.Vector3(2.5, 4, 3.5));
        playerBody.rotationInfluenceFactor = new f.Vector3(0, 0, 0); //Physics not turn our player we do it ourselves
        //since our capsule collider is a box with half spheres on top and bottom it's a little higher than our box mesh, we need to scale the pivot on the rb itself
        playerBody.mtxPivot.scale(new f.Vector3(1, 0.85, 1));
        playerBody.friction = 0.01; //lower the friction to make it easier climbing stairs - this is only needed in this kind of player structure
        //addign a nose to our player so we know whats the forward direction - but it's not a physics object
        let playerNose = createCompleteNode("PlayerNose", materialPlayer, new f.MeshCube(), playerWeight, f.PHYSICS_TYPE.DYNAMIC);
        playerNose.mtxLocal.translate(new f.Vector3(0, 0.2, 0.4));
        playerNose.mtxLocal.scale(new f.Vector3(0.1, 0.2, 1.5));
        playerNose.removeComponent(playerNose.getComponent(f.ComponentRigidbody));
        player.addChild(playerNose);
    }
    //Check if our physical player is hitting a surface with his feed, if yo let him be able to jump
    function playerIsGroundedRaycast() {
        let hitInfo;
        hitInfo = f.Physics.raycast(playerBody.getPosition(), new f.Vector3(0, -1, 0), 1.1);
        if (hitInfo.hit) {
            isGrounded = true;
        }
        else {
            isGrounded = false;
        }
    }
    // Event Function handling keyboard input
    function hndKey(_event) {
        if (_event.code == f.KEYBOARD_CODE.A) {
            yTurn = 1;
        }
        if (_event.code == f.KEYBOARD_CODE.W) {
            forwardMovement = 1;
        }
        if (_event.code == f.KEYBOARD_CODE.S) {
            forwardMovement = -1;
        }
        if (_event.code == f.KEYBOARD_CODE.D) {
            yTurn = -1;
        }
        if (_event.code == f.KEYBOARD_CODE.SPACE) {
            if (isGrounded) //Let the player only jumping when on the ground
                playerBody.applyLinearImpulse(new f.Vector3(0, playerJumpForce, 0));
        }
        if (_event.code == f.KEYBOARD_CODE.T) {
            f.Physics.settings.debugMode = f.Physics.settings.debugMode == f.PHYSICS_DEBUGMODE.JOINTS_AND_COLLIDER ? f.PHYSICS_DEBUGMODE.PHYSIC_OBJECTS_ONLY : f.PHYSICS_DEBUGMODE.JOINTS_AND_COLLIDER;
        }
    }
    //When the key is up we want to stop movement
    function hndKeyUp(_event) {
        if (_event.code == f.KEYBOARD_CODE.A) {
            yTurn = 0;
        }
        if (_event.code == f.KEYBOARD_CODE.W) {
            forwardMovement = 0;
        }
        if (_event.code == f.KEYBOARD_CODE.S) {
            forwardMovement = 0;
        }
        if (_event.code == f.KEYBOARD_CODE.D) {
            yTurn = 0;
        }
    }
    //Actually moving the player
    function playerMovement(_deltaTime) {
        let playerForward;
        playerForward = f.Vector3.Z();
        playerForward.transform(player.mtxWorld, false);
        //You can rotate a body like you would rotate a transform, incremental but keep in mind, normally we use forces in physics,
        //this is just a feature to make it easier to create player characters
        playerBody.rotateBody(new f.Vector3(0, yTurn * turningspeed * _deltaTime, 0));
        let movementVelocity = new f.Vector3();
        movementVelocity.x = playerForward.x * forwardMovement * movementspeed;
        movementVelocity.y = playerBody.getVelocity().y;
        movementVelocity.z = playerForward.z * forwardMovement * movementspeed;
        playerBody.setVelocity(movementVelocity);
        //Since we are resetting the velocity when releasing the key to have a instant stop our player is not able to slide. We would have
        //the player fade out have sliding instead you need to configure that for your own game.
    }
})(Tutorials_FUDGEPhysics_Lesson1 || (Tutorials_FUDGEPhysics_Lesson1 = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDhHQUE4RztBQUU5RyxJQUFVLDhCQUE4QixDQWdVdkM7QUFsVUQsOEdBQThHO0FBRTlHLFdBQVUsOEJBQThCO0lBQ3RDLElBQU8sQ0FBQyxHQUFHLFNBQVMsQ0FBQztJQUVyQixnRkFBZ0Y7SUFDaEYscUZBQXFGO0lBQ3JGLDhGQUE4RjtJQUU5Rix1QkFBdUI7SUFDdkIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN0QyxNQUFNLEdBQUcsR0FBc0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLCtDQUErQztJQUNoSCxJQUFJLFFBQW9CLENBQUMsQ0FBQywwQkFBMEI7SUFDcEQsSUFBSSxTQUFpQixDQUFDLENBQUMsMkJBQTJCO0lBR2xELGtCQUFrQjtJQUNsQixJQUFJLE1BQU0sR0FBYSxJQUFJLEtBQUssRUFBRSxDQUFDLENBQUMsdUVBQXVFO0lBQzNHLElBQUksTUFBYyxDQUFDO0lBQ25CLElBQUksVUFBZ0MsQ0FBQztJQUVyQyxtQkFBbUI7SUFDbkIsSUFBSSxtQkFBbUIsR0FBZSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMzSSxJQUFJLGNBQWMsR0FBZSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFD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QWMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDbEQsZ0JBQWdCLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLEdBQUcsZUFBZSxHQUFHLGFBQWEsQ0FBQztRQUN2RSxnQkFBZ0IsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNoRCxnQkFBZ0IsQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDLENBQUMsR0FBRyxlQUFlLEdBQUcsYUFBYSxDQUFDO1FBQ3ZFLFVBQVUsQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUN6QyxrSUFBa0k7UUFDbEksd0ZBQXdGO0lBQzFGLENBQUM7QUFFSCxDQUFDLEVBaFVTLDhCQUE4QixLQUE5Qiw4QkFBOEIsUUFnVXZDIiwic291cmNlc0NvbnRlbnQiOlsiLy9SZWZlcmVuY2UgRnVkZ2UsIGdldHRpbmcgY29kZSBjb21wbGV0aW9uIHJlYWR5IGFuZCBjcmVhdGluZyBhIHNob3J0Y3V0IGYgdG8gd3JpdGUgRnVkZ2VDb2RlIG1vcmUgY29tZm9ydGFibHlcclxuXHJcbm5hbWVzcGFjZSBUdXRvcmlhbHNfRlVER0VQaHlzaWNzX0xlc3NvbjEge1xyXG4gIGltcG9ydCBmID0gRnVkZ2VDb3JlO1xyXG5cclxuICAvL0dPQUxTOiBMZWFybmluZyBob3cgdG8gZGVmaW5lIHNocGVzIHRvIGNyZWF0ZSBhIG5vdCBwcmVkZWZpbmVkIGNvbGxpZGVyIHNoYXBlLlxyXG4gIC8vQnVpbHQgYSBzaW1wbGUgcGh5c2ljYWwgcGxheWVyIGxpa2UgeW91IHdvdWxkIGZpbmQgaW4gYSBhZHZlbnR1cmUgb3IgM2QgcGxhdGZvcm1lci5cclxuICAvL0hpbnQhIC0+IFRoZXNlIGNvbmNlcHRzIGFyZSBvbmx5IGEgYmFzaWMgc3RhcnQsIGV4cGFuZCBvbiBpdCB5b3Vyc2VsZiB0byBpbXByb3ZlIG9uIHJlc3VsdHMuXHJcblxyXG4gIC8vRnVkZ2UgQmFzaWMgVmFyaWFibGVzXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGluaXQpO1xyXG4gIGNvbnN0IGFwcDogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiY2FudmFzXCIpOyAvLyBUaGUgaHRtbCBlbGVtZW50IHdoZXJlIHRoZSBzY2VuZSBpcyBkcmF3biB0b1xyXG4gIGxldCB2aWV3UG9ydDogZi5WaWV3cG9ydDsgLy8gVGhlIHNjZW5lIHZpc3VhbGl6YXRpb25cclxuICBsZXQgaGllcmFyY2h5OiBmLk5vZGU7IC8vIFlvdSdyZSBvYmplY3Qgc2NlbmUgdHJlZVxyXG5cclxuXHJcbiAgLy9QaHlzaWNhbCBPYmplY3RzXHJcbiAgbGV0IGJvZGllczogZi5Ob2RlW10gPSBuZXcgQXJyYXkoKTsgLy8gQXJyYXkgb2YgYWxsIHBoeXNpY2FsIG9iamVjdHMgaW4gdGhlIHNjZW5lIHRvIGhhdmUgYSBxdWljayByZWZlcmVuY2VcclxuICBsZXQgcGxheWVyOiBmLk5vZGU7XHJcbiAgbGV0IHBsYXllckJvZHk6IGYuQ29tcG9uZW50UmlnaWRib2R5O1xyXG5cclxuICAvL1NldHRpbmcgVmFyaWFibGVzXHJcbiAgbGV0IG1hdGVyaWFsQ29udmV4U2hhcGU6IGYuTWF0ZXJpYWwgPSBuZXcgZi5NYXRlcmlhbChcIk1vcm5pbmdTdGFyVGhpbmd5XCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdENvbG9yZWQobmV3IGYuQ29sb3IoMC41LCAwLjQsIDAuMzUsIDEpKSk7XHJcbiAgbGV0IG1hdGVyaWFsUGxheWVyOiBmLk1hdGVyaWFsID0gbmV3IGYuTWF0ZXJpYWwoXCJQbGF5ZXJcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0Q29sb3JlZChuZXcgZi5Db2xvcigwLjcsIDAuOCwgMC42LCAxKSkpO1xyXG4gIGxldCBlbnZpcm9ubWVudE1hdDogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiRW52aXJvbm1lbnRcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0Q29sb3JlZChuZXcgZi5Db2xvcigwLjIsIDAuMiwgMC4yLCAxKSkpO1xyXG5cclxuICAvL1BoeXNpY2FsIFBsYXllciBWYXJpYWJsZXNcclxuICBsZXQgaXNHcm91bmRlZDogYm9vbGVhbjtcclxuICBsZXQgbW92ZW1lbnRzcGVlZDogbnVtYmVyID0gODtcclxuICBsZXQgdHVybmluZ3NwZWVkOiBudW1iZXIgPSA4MDtcclxuICBsZXQgcGxheWVyV2VpZ2h0OiBudW1iZXIgPSA3NTtcclxuICBsZXQgcGxheWVySnVtcEZvcmNlOiBudW1iZXIgPSA1MDA7XHJcbiAgbGV0IGNtcENhbWVyYTogZi5Db21wb25lbnRDYW1lcmE7IC8vV2UgbGV0IHRoZSBjYW1lcmEgbG9vayBhdCBvdXIgcGxheWVyIGluIHVwZGF0ZVxyXG4gIGxldCB5VHVybjogbnVtYmVyID0gMDsgLy9Ib3cgaGlnaCB0aGUgdHVybmluZyBpbnB1dCBjdXJyZW50bHkgaXNcclxuICBsZXQgZm9yd2FyZE1vdmVtZW50OiBudW1iZXIgPSAwOyAvL0hvdyBoaWdoIHRoZSBmb3J3YXJkIG1vdmVtZW50IGlucHV0IGN1cnJlbnRseSBpc1xyXG5cclxuICAvL0Z1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIEZ1ZGdlIFNjZW5lIHdpdGggYSBjYW1lcmEsIGxpZ2h0LCB2aWV3cG9ydCBhbmQgUEhZU0NJQUwgT2JqZWN0c1xyXG4gIGZ1bmN0aW9uIGluaXQoX2V2ZW50OiBFdmVudCk6IHZvaWQge1xyXG5cclxuICAgIGhpZXJhcmNoeSA9IG5ldyBmLk5vZGUoXCJTY2VuZVwiKTsgLy9jcmVhdGUgdGhlIHJvb3QgTm9kZSB3aGVyZSBldmVyeSBvYmplY3QgaXMgcGFyZW50ZWQgdG8uIFNob3VsZCBuZXZlciBiZSBjaGFuZ2VkXHJcblxyXG4gICAgLy8jcmVnaW9uIFBIWVNJQ1NcclxuICAgIC8vT2ltb1BoeXNpY3Mgd2hpY2ggaXMgaW50ZWdyYXRlZCBpbiBGdWRnZSBpcyB1c2luZyBhIGNvcnJlY3Rpb25BbGdvcml0aG0gb24gc29sdmVyIGl0ZXJhdGlvbnMgaW5zdGVhZCBvZiBmdWxseSByZWNhbGN1bGF0ZSBwaHlzaWNzIHRvbyBvZnRlbiwgXHJcbiAgICAvL3NvIHlvdSBjYW4gY3JhbmsgdGhlIG51bWJlciBvZiBzb2x2ZXIgaXRlcmF0aW9ucyBoaWdoZXIgdGhhbiB3aXRoIG1vc3QgZW5naW5lcy4gQnV0IE9pbW8gaXMgaW4gZ2VuZXJhbCBsZXNzIGFjY3VyYXRlLlxyXG4gICAgLy9UaGlzIGlzIG5vdCBuZWVkZWQgYnV0IHdlIGp1c3QgZG8gaXQgdG8gc2hvdyBpdC5cclxuICAgIGYuUGh5c2ljcy53b3JsZC5zZXRTb2x2ZXJJdGVyYXRpb25zKDEwMDApO1xyXG4gICAgZi5QaHlzaWNzLnNldHRpbmdzLmRlZmF1bHRSZXN0aXR1dGlvbiA9IDAuMTU7XHJcbiAgICBmLlBoeXNpY3Muc2V0dGluZ3MuZGVmYXVsdEZyaWN0aW9uID0gMC44O1xyXG5cclxuXHJcbiAgICAvL1BIWVNJQ1MgXHJcbiAgICAvL0NyZWF0aW5nIGEgcGh5c2ljYWxseSBzdGF0aWMgZ3JvdW5kIHBsYW5lIGZvciBvdXIgcGh5c2ljcyBwbGF5Z3JvdW5kLiBBIHNpbXBsZSBzY2FsZWQgY3ViZSBidXQgd2l0aCBwaHlzaWNzIHR5cGUgc2V0IHRvIHN0YXRpY1xyXG4gICAgYm9kaWVzWzBdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiR3JvdW5kXCIsIGVudmlyb25tZW50TWF0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMsIGYuUEhZU0lDU19HUk9VUC5HUk9VUF8yKTtcclxuICAgIGJvZGllc1swXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDE0LCAwLjMsIDE0KSk7IC8vU2NhbGUgdGhlIGJvZHkgd2l0aCBpdCdzIHN0YW5kYXJkIENvbXBvbmVudFRyYW5zZm9ybVxyXG4gICAgLy9ib2RpZXNbMF0ubXR4TG9jYWwucm90YXRlWCg0LCB0cnVlKTsgLy9HaXZlIGl0IGEgc2xpZ2h0IHJvdGF0aW9uIHNvIHRoZSBwaHlzaWNhbCBvYmplY3RzIGFyZSBzbGlkaW5nLCBhbHdheXMgZnJvbSBsZWZ0IHdoZW4gaXQncyBhZnRlciBhIHNjYWxpbmdcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMF0pOyAvL0FkZCB0aGUgbm9kZSB0byB0aGUgc2NlbmUgYnkgYWRkaW5nIGl0IHRvIHRoZSBzY2VuZS1yb290XHJcblxyXG5cclxuICAgIC8vQ09OQ0VQVCAxIC0gQ29udmV4IENvbGxpZGVycyAvIENvbXBvdW5kIENvbGxpZGVyIC0gQSBDb2xsaWRlciBTaGFwZSB0aGF0IGlzIG5vdCBwcmVkZWZpbmVkIGFuZCBoYXMgbm8gaG9sZXMgaW4gaXRcclxuICAgIC8vZS5nLiBzb21ldGhpbmcgbGlrZSBhIG1vcm5pbmcgc3RhciBzaGFwZSBhIGN1YmUgd2l0aCBweXJhbWlkZXMgYXMgc3Bpa2VzIG9uIHRoZSBzaWRlXHJcbiAgICBjcmVhdGVDb252ZXhDb21wb3VudENvbGxpZGVyKCk7XHJcblxyXG4gICAgLy9DT05DRVBUIDIgLSBTZXR0aW5nIFVwIGEgcGh5c2ljYWwgcGxheWVyXHJcbiAgICAvL0EgcGh5c2ljYWwgcGxheWVyIGlzIGEgc3RhbmRhcmQgcGh5c2ljYWwgb2JqZWN0IG9mIHRoZSB0eXBlIGR5bmFtaWMsIEJVVCwgeW91IG9ubHkgd2FudCB0byByb3RhdGUgb24gWSBheGlzLCBhbmQgeW91IHdhbnQgdG8gc2V0dXAgdGhpbmdzXHJcbiAgICAvL2xpa2UgYSBncm91bmRlZCB2YXJpYWJsZSBhbmQgb3RoZXIgbW92ZW1lbnQgcmVsYXRlZCBzdHVmZi5cclxuICAgIHNldHRpbmdVcEFQbGF5ZXIoKTtcclxuXHJcbiAgICAvL1NldHRpbmcgdXAgc29tZSBlbnZpcm9ubWVudCBvYmplY3RzIGZvciBvdXIgcGxheWVyIHRvIGp1bXAgb25cclxuICAgIGJvZGllc1sxMDBdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiRW52aW5yb21lbnRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQywgZi5QSFlTSUNTX0dST1VQLkdST1VQXzIpO1xyXG4gICAgYm9kaWVzWzEwMF0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoNSwgMSwgMykpO1xyXG4gICAgYm9kaWVzWzEwMF0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxLCAxLCAxKSk7XHJcbiAgICAvL2JvZGllc1sxMDBdLm10eExvY2FsLnJvdGF0ZVgoNCwgdHJ1ZSk7IFxyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDBdKTsgLy9BZGQgdGhlIG5vZGUgdG8gdGhlIHNjZW5lIGJ5IGFkZGluZyBpdCB0byB0aGUgc2NlbmUtcm9vdFxyXG5cclxuICAgIGJvZGllc1sxMDFdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiRW52aW5yb21lbnRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQywgZi5QSFlTSUNTX0dST1VQLkdST1VQXzIpO1xyXG4gICAgYm9kaWVzWzEwMV0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoLTMsIDMuNSwgMikpO1xyXG4gICAgYm9kaWVzWzEwMV0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxLCAxLCA1KSk7XHJcbiAgICBib2RpZXNbMTAxXS5tdHhMb2NhbC5yb3RhdGVYKDQwLCB0cnVlKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMTAxXSk7XHJcblxyXG4gICAgLypTdGFpcnMsIGtlZXAgaW4gbWluZCBvdXIgcGxheWVyIGlzIG9ubHkgYWJsZSB0byB3YWxrIHVwIHN0YXJzIGJlY2F1c2UgaGUgaXMgYSBjYXBzdWxlIGJ1dCBpdCdzIG5vdCBlYXN5IGZvciBoaW0gYmVjYXVzZSB3ZSBkbyBub3QgbGlmdCBhbnkgZmVldCxcclxuICAgIHdlIGFyZSBqdXN0IHB1c2hpbmcgYSBjYXBzdWxlIHdpdGggZm9yY2UgYWdhaW5zdCBhIHNsb3BlIHVudGlsIGl0J3MgcHVzaGVkIHVwLCB3aGljaCB3ZSBtYWtlIGVhc2llciBieSBnaXZpbmcgdGhlIHBsYXllciBhIGxvdyBmcmljdGlvbiwgdGhlIHdheVxyXG4gICAgd2Ugc2V0IHRoZSBwbGF5ZXIgdXAgaGUgY2FuIG5vdCBzbGlkZSBvbiB0aGUgZ3JvdW5kIGJ1dCBpdCBoZWxwcyB0byBnZXQgaGltIHVwIHRoZSBzdGFpcnMuXHJcbiAgICBTbyB5b3UgbmVlZCB0byB0dXJuIGFyb3VuZCBhIGxpdHRsZSB3aGlsZSBtb3ZpbmcgdG8gY2xpbWIgdGhlc2Ugc3RhaXJzXHJcbiAgICBhZHZhbmNlZCBzdGFpcndhbGtpbmcgaXMgc29tZXRoaW5nIHlvdSBuZWVkIHRvIGZpZ3VyZSBvdXQgeW91cnNlbGYuIEtleXdvcmQgcmF5Y2FzdCBpcyBhIGdvb2Qgc3RhcnQuIFxyXG4gICAgKi9cclxuICAgIGxldCBzbG9wZUhlaWdodDogbnVtYmVyID0gMC4yMDtcclxuICAgIGJvZGllc1sxMDJdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiRW52aW5yb21lbnRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQywgZi5QSFlTSUNTX0dST1VQLkdST1VQXzIpO1xyXG4gICAgYm9kaWVzWzEwMl0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoLTMsIHNsb3BlSGVpZ2h0LCAtMikpO1xyXG4gICAgYm9kaWVzWzEwMl0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygyLCBzbG9wZUhlaWdodCAqIDIsIDAuMzUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMTAyXSk7XHJcbiAgICBib2RpZXNbMTAzXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkVudmlucm9tZW50XCIsIGVudmlyb25tZW50TWF0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMsIGYuUEhZU0lDU19HUk9VUC5HUk9VUF8yKTtcclxuICAgIGJvZGllc1sxMDNdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKC0zLCBzbG9wZUhlaWdodCAqIDIsIC0yIC0gMC4zNSkpO1xyXG4gICAgYm9kaWVzWzEwM10ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygyLCBzbG9wZUhlaWdodCAqIDIsIDAuMzUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMTAzXSk7XHJcbiAgICBib2RpZXNbMTA0XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkVudmlucm9tZW50XCIsIGVudmlyb25tZW50TWF0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMsIGYuUEhZU0lDU19HUk9VUC5HUk9VUF8yKTtcclxuICAgIGJvZGllc1sxMDRdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKC0zLCBzbG9wZUhlaWdodCAqIDMsIC0yIC0gMC4zNSAqIDIpKTtcclxuICAgIGJvZGllc1sxMDRdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMiwgc2xvcGVIZWlnaHQgKiAyLCAwLjM1KSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzEwNF0pO1xyXG4gICAgYm9kaWVzWzEwNV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJFbnZpbnJvbWVudFwiLCBlbnZpcm9ubWVudE1hdCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDLCBmLlBIWVNJQ1NfR1JPVVAuR1JPVVBfMik7XHJcbiAgICBib2RpZXNbMTA1XS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygtMywgc2xvcGVIZWlnaHQgKiA0LCAtMiAtIDAuMzUgKiAzKSk7XHJcbiAgICBib2RpZXNbMTA1XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDIsIHNsb3BlSGVpZ2h0ICogMiwgMC4zNSkpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDVdKTtcclxuICAgIGJvZGllc1sxMDZdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiRW52aW5yb21lbnRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQywgZi5QSFlTSUNTX0dST1VQLkdST1VQXzIpO1xyXG4gICAgYm9kaWVzWzEwNl0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoLTMsIHNsb3BlSGVpZ2h0ICogNSwgLTIgLSAwLjM1ICogNCkpO1xyXG4gICAgYm9kaWVzWzEwNl0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygyLCBzbG9wZUhlaWdodCAqIDIsIDAuMzUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMTA2XSk7XHJcbiAgICAvLyNlbmRyZWdpb24gUEhZU0lDU1xyXG5cclxuXHJcbiAgICAvL1N0YW5kYXJkIEZ1ZGdlIFNjZW5lIEluaXRpYWxpemF0aW9uIC0gQ3JlYXRpbmcgYSBkaXJlY3Rpb25hbCBsaWdodCwgYSBjYW1lcmEgYW5kIGluaXRpYWxpemUgdGhlIHZpZXdwb3J0XHJcbiAgICBsZXQgY21wTGlnaHQ6IGYuQ29tcG9uZW50TGlnaHQgPSBuZXcgZi5Db21wb25lbnRMaWdodChuZXcgZi5MaWdodERpcmVjdGlvbmFsKGYuQ29sb3IuQ1NTKFwiV0hJVEVcIikpKTtcclxuICAgIGNtcExpZ2h0Lm10eFBpdm90Lmxvb2tBdChuZXcgZi5WZWN0b3IzKDAuNSwgLTEsIC0wLjgpKTsgLy9TZXQgbGlnaHQgZGlyZWN0aW9uXHJcbiAgICBoaWVyYXJjaHkuYWRkQ29tcG9uZW50KGNtcExpZ2h0KTtcclxuXHJcbiAgICBjbXBDYW1lcmEgPSBuZXcgZi5Db21wb25lbnRDYW1lcmEoKTtcclxuICAgIGNtcENhbWVyYS5jbHJCYWNrZ3JvdW5kID0gZi5Db2xvci5DU1MoXCJHUkVZXCIpO1xyXG4gICAgY21wQ2FtZXJhLm10eFBpdm90LnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKDE3LCA0LCAxNykpOyAvL01vdmUgY2FtZXJhIGZhciBiYWNrIHNvIHRoZSB3aG9sZSBzY2VuZSBpcyB2aXNpYmxlXHJcbiAgICBjbXBDYW1lcmEubXR4UGl2b3QubG9va0F0KGYuVmVjdG9yMy5aRVJPKCkpOyAvL1NldCB0aGUgY2FtZXJhIG1hdHJpeCBzbyB0aGF0IGl0IGxvb2tzIGF0IHRoZSBjZW50ZXIgb2YgdGhlIHNjZW5lXHJcblxyXG4gICAgdmlld1BvcnQgPSBuZXcgZi5WaWV3cG9ydCgpOyAvL0NyZWF0aW5nIGEgdmlld3BvcnQgdGhhdCBpcyByZW5kZXJlZCBvbnRvIHRoZSBodG1sIGNhbnZhcyBlbGVtZW50XHJcbiAgICB2aWV3UG9ydC5pbml0aWFsaXplKFwiVmlld3BvcnRcIiwgaGllcmFyY2h5LCBjbXBDYW1lcmEsIGFwcCk7IC8vaW5pdGlhbGl6ZSB0aGUgdmlld3BvcnQgd2l0aCB0aGUgcm9vdCBub2RlLCBjYW1lcmEgYW5kIGNhbnZhc1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCBobmRLZXkpOyAvL0FkZGluZyBhIGxpc3RlbmVyIGZvciBrZXlwcmVzcyBoYW5kbGluZ1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGhuZEtleVVwKTsgLy9BZGRpbmcgYSBsaXN0ZW5lciBmb3Iga2V5VXBcclxuXHJcbiAgICAvL1BIWVNJQ1MgLSBTdGFydCB1c2luZyBwaHlzaWNzIGJ5IHRlbGxpbmcgdGhlIHBoeXNpY3MgdGhlIHNjZW5lIHJvb3Qgb2JqZWN0LiBQaHlzaWNzIHdpbGwgcmVjYWxjdWxhdGUgZXZlcnkgdHJhbnNmb3JtIGFuZCBpbml0aWFsaXplXHJcbiAgICBmLlBoeXNpY3MuYWRqdXN0VHJhbnNmb3JtcyhoaWVyYXJjaHkpO1xyXG5cclxuICAgIGYuUGh5c2ljcy5zZXR0aW5ncy5kZWJ1Z0RyYXcgPSB0cnVlO1xyXG5cclxuICAgIC8vSW1wb3J0YW50IHN0YXJ0IHRoZSBnYW1lIGxvb3AgYWZ0ZXIgc3RhcnRpbmcgcGh5c2ljcywgc28gcGh5c2ljcyBjYW4gdXNlIHRoZSBjdXJyZW50IHRyYW5zZm9ybSBiZWZvcmUgaXQncyBmaXJzdCBpdGVyYXRpb25cclxuICAgIGYuTG9vcC5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlQuTE9PUF9GUkFNRSwgdXBkYXRlKTsgLy9UZWxsIHRoZSBnYW1lIGxvb3AgdG8gY2FsbCB0aGUgdXBkYXRlIGZ1bmN0aW9uIG9uIGVhY2ggZnJhbWVcclxuICAgIGYuTG9vcC5zdGFydCgpOyAvL1N0YXJkIHRoZSBnYW1lIGxvb3BcclxuICB9XHJcblxyXG4gIC8vRnVuY3Rpb24gdG8gYW5pbWF0ZS91cGRhdGUgdGhlIEZ1ZGdlIHNjZW5lLCBjb21tb25seSBrbm93biBhcyBnYW1lbG9vcFxyXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgIC8vUEhZU0lDUyAtIFNpbXVsYXRlIHBoeXNpY2FsIGNoYW5nZXMgZWFjaCBmcmFtZSwgcGFyYW1ldGVyIHRvIHNldCB0aW1lIGJldHdlZW4gZnJhbWVzXHJcbiAgICBmLlBoeXNpY3Mud29ybGQuc2ltdWxhdGUoZi5Mb29wLnRpbWVGcmFtZVJlYWwgLyAxMDAwKTtcclxuXHJcbiAgICAvL1BsYXllciBjb25zdGFudCB1cGRhdGUgZnVuY3Rpb25zIGRvIGl0IGFmdGVyIHBoeXNpY3MgY2FsY3VsYXRpb24gaXMgYmVzdCBwcmFjdGljZVxyXG4gICAgY21wQ2FtZXJhLm10eFBpdm90Lmxvb2tBdChwbGF5ZXIubXR4V29ybGQudHJhbnNsYXRpb24pO1xyXG4gICAgcGxheWVySXNHcm91bmRlZFJheWNhc3QoKTtcclxuICAgIHBsYXllck1vdmVtZW50KGYuTG9vcC50aW1lRnJhbWVSZWFsIC8gMTAwMCk7XHJcblxyXG4gICAgdmlld1BvcnQuZHJhdygpOyAvLyBEcmF3IHRoZSBjdXJyZW50IEZ1ZGdlIFNjZW5lIHRvIHRoZSBjYW52YXNcclxuICB9XHJcblxyXG4gIC8vIEZ1bmN0aW9uIHRvIHF1aWNrbHkgY3JlYXRlIGEgbm9kZSB3aXRoIG11bHRpcGxlIG5lZWRlZCBGdWRnZUNvbXBvbmVudHMsIGluY2x1ZGluZyBhIHBoeXNpY3MgY29tcG9uZW50XHJcbiAgZnVuY3Rpb24gY3JlYXRlQ29tcGxldGVOb2RlKF9uYW1lOiBzdHJpbmcsIF9tYXRlcmlhbDogZi5NYXRlcmlhbCwgX21lc2g6IGYuTWVzaCwgX21hc3M6IG51bWJlciwgX3BoeXNpY3NUeXBlOiBmLlBIWVNJQ1NfVFlQRSwgX2dyb3VwOiBmLlBIWVNJQ1NfR1JPVVAgPSBmLlBIWVNJQ1NfR1JPVVAuREVGQVVMVCwgX2NvbFR5cGU6IGYuQ09MTElERVJfVFlQRSA9IGYuQ09MTElERVJfVFlQRS5DVUJFLCBfY29udmV4TWVzaDogRmxvYXQzMkFycmF5ID0gbnVsbCk6IGYuTm9kZSB7XHJcbiAgICBsZXQgbm9kZTogZi5Ob2RlID0gbmV3IGYuTm9kZShfbmFtZSk7XHJcbiAgICBsZXQgY21wTWVzaDogZi5Db21wb25lbnRNZXNoID0gbmV3IGYuQ29tcG9uZW50TWVzaChfbWVzaCk7XHJcbiAgICBsZXQgY21wTWF0ZXJpYWw6IGYuQ29tcG9uZW50TWF0ZXJpYWwgPSBuZXcgZi5Db21wb25lbnRNYXRlcmlhbChfbWF0ZXJpYWwpO1xyXG5cclxuICAgIGxldCBjbXBUcmFuc2Zvcm06IGYuQ29tcG9uZW50VHJhbnNmb3JtID0gbmV3IGYuQ29tcG9uZW50VHJhbnNmb3JtKCk7XHJcbiAgICBsZXQgY21wUmlnaWRib2R5OiBmLkNvbXBvbmVudFJpZ2lkYm9keSA9IG5ldyBmLkNvbXBvbmVudFJpZ2lkYm9keShfbWFzcywgX3BoeXNpY3NUeXBlLCBfY29sVHlwZSwgX2dyb3VwLCBudWxsLCBfY29udmV4TWVzaCk7IC8vYWRkIGEgRmxvYXQzMiBBcnJheSBvZiBwb2ludHMgdG8gdGhlIHJiIGNvbnN0cnVjdG9yIHRvIGNyZWF0ZSBhIGNvbnZleCBjb2xsaWRlclxyXG4gICAgbm9kZS5hZGRDb21wb25lbnQoY21wTWVzaCk7XHJcbiAgICBub2RlLmFkZENvbXBvbmVudChjbXBNYXRlcmlhbCk7XHJcbiAgICBub2RlLmFkZENvbXBvbmVudChjbXBUcmFuc2Zvcm0pO1xyXG4gICAgbm9kZS5hZGRDb21wb25lbnQoY21wUmlnaWRib2R5KTtcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlQ29udmV4Q29tcG91bnRDb2xsaWRlcigpOiB2b2lkIHtcclxuICAgIC8vU3RlcCAxIC0gZGVmaW5lIHBvaW50cyB0aGF0IGNvbnN0cnVjdCB0aGUgc2hhcGUgeW91IHdhbnQgZm9yIHlvdXIgY29sbGlkZXIgLSBvcmRlciBpcyBpbXBvcnRhbnQgc28gdGhpbmsgYWJvdXQgd2hhdCBwb2ludCBjb21lcyB3aGVuIGluIHlvdXIgc2hhcGVcclxuICAgIGxldCBjb2xsaWRlclZlcnRpY2VzOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5XHJcbiAgICAgIChbXHJcbiAgICAgICAgMSwgLTEsIDEsICAgICAvL1N0YXJ0IG9mIHdpdGggYSBjdWJlIHBvaW50XHJcbiAgICAgICAgMCwgLTIsIDAsICAgICAvL2dvIHRvIGEgcHlyYW1pZCBwb2ludFxyXG4gICAgICAgIDEsIDEsIDEsICAgICAgLy9iYWNrIHRvIHRoZSBjdWJlXHJcbiAgICAgICAgLSAxLCAxLCAxLCAgICAvL2Fsb25nIHRoZSBjdWJlXHJcbiAgICAgICAgLSAxLCAtMSwgMSwgICAvL2Fsb25nIHRoZSBjdWJlIG9uIGEgZGlmZmVyZW50IHNpZGVcclxuICAgICAgICAtMiwgMCwgMCwgICAgIC8vZ28gdG8gYW5vdGhlciBweXJhbWlkIHBvaW50XHJcbiAgICAgICAgMSwgMSwgLTEsICAgICAvL2JhY2sgb24gdGhlIGN1YmVcclxuICAgICAgICAtIDEsIDEsIC0xLCAgIC8vYW5kIHNvIG9uLi4gaXQgaXMgbm90IGltcG9ydGFudCB0aGF0IGFsbCBwb2ludHMgYXJlIGluIGEgY29ycmVjdCBvcmRlcixcclxuICAgICAgICAtIDEsIC0xLCAtMSwgIC8vYnV0IHNpbmNlIHRoZSBwaHlzaWNzIGVuZ2luZSBpcyB0cnlpbmcgdG8gY29uc3RydWN0IGEgc2hhcGUgb3V0IG9mIHlvdXIgcG9pbnRzIHRoYXQgaXMgY2xvc2VkIG9mIGl0IHNob3VsZCBtYWtlIHNvbWUgc2Vuc2VcclxuICAgICAgICAwLCAwLCAtMixcclxuICAgICAgICAxLCAtMSwgLTEsXHJcbiAgICAgICAgMiwgMCwgMCxcclxuICAgICAgICAwLCAyLCAwLFxyXG4gICAgICAgIDAsIDAsIDJcclxuICAgICAgXSk7XHJcblxyXG4gICAgLy9TdGVwIDIgLSBkZWZpbmUgdGhlIHZpc3VhbCBub2RlcyB0aGF0IGFyZSBwYXJ0IG9mIHlvdXIgd2hvbGUgc2hhcGUsIHNpbmNlIHdlIGhhdmUgYSBjdWJlIHRoYXQgaXMgc3Vyb3VuZGVkIGJ5IHB5cmFtaWRzOlxyXG4gICAgLy9NYWluIFNoYXBlXHJcbiAgICBib2RpZXNbNV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJDb21wb3VuZFwiLCBtYXRlcmlhbENvbnZleFNoYXBlLCBuZXcgZi5NZXNoQ3ViZSgpLCAxLCBmLlBIWVNJQ1NfVFlQRS5EWU5BTUlDLCBmLlBIWVNJQ1NfR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLkNPTlZFWCwgY29sbGlkZXJWZXJ0aWNlcyk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzVdKTtcclxuICAgIGJvZGllc1s1XS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygyLjUsIDQsIDMuNSkpO1xyXG4gICAgYm9kaWVzWzVdLm10eExvY2FsLnJvdGF0ZVgoMjcpO1xyXG4gICAgYm9kaWVzWzVdLm10eExvY2FsLnJvdGF0ZVkoMzIpO1xyXG4gICAgLy9Db21wb25lbnRzIC0gUmVtb3ZpbmcgdGhlIFBoeXNpY3MgY29tcG9uZW50IG9uIGVhY2ggb2YgdGhlbSBzaW5jZSB0aGV5IGFsbCBidWlsZCBvbmUgc2hhcGUgb24gdGhlIG1haW4gTm9kZSBvbmx5IHRoZSB2aXN1YWwgbm9kZXMgbmVlZCB0byBiZSB0aGVyZVxyXG4gICAgYm9kaWVzWzZdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQ29tcG91bmRVcHBlclwiLCBtYXRlcmlhbENvbnZleFNoYXBlLCBuZXcgZi5NZXNoUHlyYW1pZCgpLCAxLCBmLlBIWVNJQ1NfVFlQRS5EWU5BTUlDLCBmLlBIWVNJQ1NfR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLlBZUkFNSUQpO1xyXG4gICAgYm9kaWVzWzZdLnJlbW92ZUNvbXBvbmVudChib2RpZXNbNl0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KSk7XHJcbiAgICBib2RpZXNbNl0ubXR4TG9jYWwudHJhbnNsYXRlWSgwLjUpO1xyXG4gICAgYm9kaWVzWzZdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICBib2RpZXNbNV0uYXBwZW5kQ2hpbGQoYm9kaWVzWzZdKTsgLy9hcHBlbmRpbmcgdGhlIE5vZGUgbm90IHRvIHRoZSBtYWluIGhpZXJhcmNoeSBidXQgdGhlIE5vZGUgaXQgaXMgcGFydCBvZlxyXG4gICAgYm9kaWVzWzddID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQ29tcG91bmRMb3dlclwiLCBtYXRlcmlhbENvbnZleFNoYXBlLCBuZXcgZi5NZXNoUHlyYW1pZCgpLCAxLCBmLlBIWVNJQ1NfVFlQRS5EWU5BTUlDLCBmLlBIWVNJQ1NfR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLlBZUkFNSUQpO1xyXG4gICAgYm9kaWVzWzddLnJlbW92ZUNvbXBvbmVudChib2RpZXNbN10uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KSk7XHJcbiAgICBib2RpZXNbN10ubXR4TG9jYWwucm90YXRlWCgxODApO1xyXG4gICAgYm9kaWVzWzddLm10eExvY2FsLnRyYW5zbGF0ZVkoMC41KTtcclxuICAgIGJvZGllc1s3XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDEsIDAuNSwgMSkpO1xyXG4gICAgYm9kaWVzWzVdLmFwcGVuZENoaWxkKGJvZGllc1s3XSk7XHJcbiAgICBib2RpZXNbOF0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJDb21wb3VuZExlZnRcIiwgbWF0ZXJpYWxDb252ZXhTaGFwZSwgbmV3IGYuTWVzaFB5cmFtaWQoKSwgMSwgZi5QSFlTSUNTX1RZUEUuRFlOQU1JQywgZi5QSFlTSUNTX0dST1VQLkRFRkFVTFQsIGYuQ09MTElERVJfVFlQRS5QWVJBTUlEKTtcclxuICAgIGJvZGllc1s4XS5yZW1vdmVDb21wb25lbnQoYm9kaWVzWzhdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkpO1xyXG4gICAgYm9kaWVzWzhdLm10eExvY2FsLnJvdGF0ZVooOTApO1xyXG4gICAgYm9kaWVzWzhdLm10eExvY2FsLnRyYW5zbGF0ZVkoMC41KTtcclxuICAgIGJvZGllc1s4XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDEsIDAuNSwgMSkpO1xyXG4gICAgYm9kaWVzWzVdLmFwcGVuZENoaWxkKGJvZGllc1s4XSk7XHJcbiAgICBib2RpZXNbOV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJDb21wb3VuZFJpZ2h0XCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hQeXJhbWlkKCksIDEsIGYuUEhZU0lDU19UWVBFLkRZTkFNSUMsIGYuUEhZU0lDU19HUk9VUC5ERUZBVUxULCBmLkNPTExJREVSX1RZUEUuUFlSQU1JRCk7XHJcbiAgICBib2RpZXNbOV0ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1s5XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpKTtcclxuICAgIGJvZGllc1s5XS5tdHhMb2NhbC5yb3RhdGVaKC05MCk7XHJcbiAgICBib2RpZXNbOV0ubXR4TG9jYWwudHJhbnNsYXRlWSgwLjUpO1xyXG4gICAgYm9kaWVzWzldLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICBib2RpZXNbNV0uYXBwZW5kQ2hpbGQoYm9kaWVzWzldKTtcclxuICAgIGJvZGllc1sxMF0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJDb21wb3VuZEZyb250XCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hQeXJhbWlkKCksIDEsIGYuUEhZU0lDU19UWVBFLkRZTkFNSUMsIGYuUEhZU0lDU19HUk9VUC5ERUZBVUxULCBmLkNPTExJREVSX1RZUEUuUFlSQU1JRCk7XHJcbiAgICBib2RpZXNbMTBdLnJlbW92ZUNvbXBvbmVudChib2RpZXNbMTBdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkpO1xyXG4gICAgYm9kaWVzWzEwXS5tdHhMb2NhbC5yb3RhdGVYKDkwKTtcclxuICAgIGJvZGllc1sxMF0ubXR4TG9jYWwudHJhbnNsYXRlWSgwLjUpO1xyXG4gICAgYm9kaWVzWzEwXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDEsIDAuNSwgMSkpO1xyXG4gICAgYm9kaWVzWzVdLmFwcGVuZENoaWxkKGJvZGllc1sxMF0pO1xyXG4gICAgYm9kaWVzWzExXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkNvbXBvdW5kQmFja1wiLCBtYXRlcmlhbENvbnZleFNoYXBlLCBuZXcgZi5NZXNoUHlyYW1pZCgpLCAxLCBmLlBIWVNJQ1NfVFlQRS5EWU5BTUlDLCBmLlBIWVNJQ1NfR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLlBZUkFNSUQpO1xyXG4gICAgYm9kaWVzWzExXS5yZW1vdmVDb21wb25lbnQoYm9kaWVzWzExXS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpKTtcclxuICAgIGJvZGllc1sxMV0ubXR4TG9jYWwucm90YXRlWCgtOTApO1xyXG4gICAgYm9kaWVzWzExXS5tdHhMb2NhbC50cmFuc2xhdGVZKDAuNSk7XHJcbiAgICBib2RpZXNbMTFdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICBib2RpZXNbNV0uYXBwZW5kQ2hpbGQoYm9kaWVzWzExXSk7XHJcbiAgICBib2RpZXNbNV0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5yZXN0aXR1dGlvbiA9IDM7XHJcbiAgfVxyXG5cclxuICAvL1NldHRpbmcgdXAgYSBwaHlzaWNhbCBwbGF5ZXIgd2hpY2ggaXMgbm90aGlnbiBidXQgYSBjdWJlIGJ1dCBhYmxlIHRvIHBsYXRmb3JtIGluIG91ciBsaXR0bGUgd29ybGQgYW5kIHJlYWN0aW5nIHRvIHN0dWZmXHJcbiAgZnVuY3Rpb24gc2V0dGluZ1VwQVBsYXllcigpOiB2b2lkIHtcclxuICAgIHBsYXllciA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIlBsYXllclwiLCBtYXRlcmlhbFBsYXllciwgbmV3IGYuTWVzaEN1YmUoKSwgcGxheWVyV2VpZ2h0LCBmLlBIWVNJQ1NfVFlQRS5EWU5BTUlDLCBmLlBIWVNJQ1NfR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLkNBUFNVTEUpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKHBsYXllcik7XHJcbiAgICBwbGF5ZXJCb2R5ID0gcGxheWVyLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSk7XHJcbiAgICBwbGF5ZXIubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjUsIDEuOCwgMC4zKSk7XHJcbiAgICBwbGF5ZXIubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoMi41LCA0LCAzLjUpKTtcclxuICAgIHBsYXllckJvZHkucm90YXRpb25JbmZsdWVuY2VGYWN0b3IgPSBuZXcgZi5WZWN0b3IzKDAsIDAsIDApOyAvL1BoeXNpY3Mgbm90IHR1cm4gb3VyIHBsYXllciB3ZSBkbyBpdCBvdXJzZWx2ZXNcclxuICAgIC8vc2luY2Ugb3VyIGNhcHN1bGUgY29sbGlkZXIgaXMgYSBib3ggd2l0aCBoYWxmIHNwaGVyZXMgb24gdG9wIGFuZCBib3R0b20gaXQncyBhIGxpdHRsZSBoaWdoZXIgdGhhbiBvdXIgYm94IG1lc2gsIHdlIG5lZWQgdG8gc2NhbGUgdGhlIHBpdm90IG9uIHRoZSByYiBpdHNlbGZcclxuICAgIHBsYXllckJvZHkubXR4UGl2b3Quc2NhbGUobmV3IGYuVmVjdG9yMygxLCAwLjg1LCAxKSk7XHJcbiAgICBwbGF5ZXJCb2R5LmZyaWN0aW9uID0gMC4wMTsgLy9sb3dlciB0aGUgZnJpY3Rpb24gdG8gbWFrZSBpdCBlYXNpZXIgY2xpbWJpbmcgc3RhaXJzIC0gdGhpcyBpcyBvbmx5IG5lZWRlZCBpbiB0aGlzIGtpbmQgb2YgcGxheWVyIHN0cnVjdHVyZVxyXG5cclxuICAgIC8vYWRkaWduIGEgbm9zZSB0byBvdXIgcGxheWVyIHNvIHdlIGtub3cgd2hhdHMgdGhlIGZvcndhcmQgZGlyZWN0aW9uIC0gYnV0IGl0J3Mgbm90IGEgcGh5c2ljcyBvYmplY3RcclxuICAgIGxldCBwbGF5ZXJOb3NlOiBmLk5vZGUgPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJQbGF5ZXJOb3NlXCIsIG1hdGVyaWFsUGxheWVyLCBuZXcgZi5NZXNoQ3ViZSgpLCBwbGF5ZXJXZWlnaHQsIGYuUEhZU0lDU19UWVBFLkRZTkFNSUMpO1xyXG4gICAgcGxheWVyTm9zZS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygwLCAwLjIsIDAuNCkpO1xyXG4gICAgcGxheWVyTm9zZS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMSwgMC4yLCAxLjUpKTtcclxuICAgIHBsYXllck5vc2UucmVtb3ZlQ29tcG9uZW50KHBsYXllck5vc2UuZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KSk7XHJcbiAgICBwbGF5ZXIuYWRkQ2hpbGQocGxheWVyTm9zZSk7XHJcbiAgfVxyXG5cclxuICAvL0NoZWNrIGlmIG91ciBwaHlzaWNhbCBwbGF5ZXIgaXMgaGl0dGluZyBhIHN1cmZhY2Ugd2l0aCBoaXMgZmVlZCwgaWYgeW8gbGV0IGhpbSBiZSBhYmxlIHRvIGp1bXBcclxuICBmdW5jdGlvbiBwbGF5ZXJJc0dyb3VuZGVkUmF5Y2FzdCgpOiB2b2lkIHtcclxuICAgIGxldCBoaXRJbmZvOiBmLlJheUhpdEluZm87XHJcbiAgICBoaXRJbmZvID0gZi5QaHlzaWNzLnJheWNhc3QocGxheWVyQm9keS5nZXRQb3NpdGlvbigpLCBuZXcgZi5WZWN0b3IzKDAsIC0xLCAwKSwgMS4xKTtcclxuICAgIGlmIChoaXRJbmZvLmhpdCkge1xyXG4gICAgICBpc0dyb3VuZGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlzR3JvdW5kZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvLyBFdmVudCBGdW5jdGlvbiBoYW5kbGluZyBrZXlib2FyZCBpbnB1dFxyXG4gIGZ1bmN0aW9uIGhuZEtleShfZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuXHJcbiAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLkEpIHtcclxuICAgICAgeVR1cm4gPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKF9ldmVudC5jb2RlID09IGYuS0VZQk9BUkRfQ09ERS5XKSB7XHJcbiAgICAgIGZvcndhcmRNb3ZlbWVudCA9IDE7XHJcbiAgICB9XHJcbiAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLlMpIHtcclxuICAgICAgZm9yd2FyZE1vdmVtZW50ID0gLTE7XHJcbiAgICB9XHJcbiAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLkQpIHtcclxuICAgICAgeVR1cm4gPSAtMTtcclxuICAgIH1cclxuICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuU1BBQ0UpIHtcclxuICAgICAgaWYgKGlzR3JvdW5kZWQpIC8vTGV0IHRoZSBwbGF5ZXIgb25seSBqdW1waW5nIHdoZW4gb24gdGhlIGdyb3VuZFxyXG4gICAgICAgIHBsYXllckJvZHkuYXBwbHlMaW5lYXJJbXB1bHNlKG5ldyBmLlZlY3RvcjMoMCwgcGxheWVySnVtcEZvcmNlLCAwKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKF9ldmVudC5jb2RlID09IGYuS0VZQk9BUkRfQ09ERS5UKSB7XHJcbiAgICAgIGYuUGh5c2ljcy5zZXR0aW5ncy5kZWJ1Z01vZGUgPSBmLlBoeXNpY3Muc2V0dGluZ3MuZGVidWdNb2RlID09IGYuUEhZU0lDU19ERUJVR01PREUuSk9JTlRTX0FORF9DT0xMSURFUiA/IGYuUEhZU0lDU19ERUJVR01PREUuUEhZU0lDX09CSkVDVFNfT05MWSA6IGYuUEhZU0lDU19ERUJVR01PREUuSk9JTlRTX0FORF9DT0xMSURFUjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vV2hlbiB0aGUga2V5IGlzIHVwIHdlIHdhbnQgdG8gc3RvcCBtb3ZlbWVudFxyXG4gIGZ1bmN0aW9uIGhuZEtleVVwKF9ldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgaWYgKF9ldmVudC5jb2RlID09IGYuS0VZQk9BUkRfQ09ERS5BKSB7XHJcbiAgICAgIHlUdXJuID0gMDtcclxuICAgIH1cclxuICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuVykge1xyXG4gICAgICBmb3J3YXJkTW92ZW1lbnQgPSAwO1xyXG4gICAgfVxyXG4gICAgaWYgKF9ldmVudC5jb2RlID09IGYuS0VZQk9BUkRfQ09ERS5TKSB7XHJcbiAgICAgIGZvcndhcmRNb3ZlbWVudCA9IDA7XHJcbiAgICB9XHJcbiAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLkQpIHtcclxuICAgICAgeVR1cm4gPSAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9BY3R1YWxseSBtb3ZpbmcgdGhlIHBsYXllclxyXG4gIGZ1bmN0aW9uIHBsYXllck1vdmVtZW50KF9kZWx0YVRpbWU6IG51bWJlcikge1xyXG4gICAgbGV0IHBsYXllckZvcndhcmQ6IGYuVmVjdG9yMztcclxuICAgIHBsYXllckZvcndhcmQgPSBmLlZlY3RvcjMuWigpO1xyXG4gICAgcGxheWVyRm9yd2FyZC50cmFuc2Zvcm0ocGxheWVyLm10eFdvcmxkLCBmYWxzZSk7XHJcblxyXG4gICAgLy9Zb3UgY2FuIHJvdGF0ZSBhIGJvZHkgbGlrZSB5b3Ugd291bGQgcm90YXRlIGEgdHJhbnNmb3JtLCBpbmNyZW1lbnRhbCBidXQga2VlcCBpbiBtaW5kLCBub3JtYWxseSB3ZSB1c2UgZm9yY2VzIGluIHBoeXNpY3MsXHJcbiAgICAvL3RoaXMgaXMganVzdCBhIGZlYXR1cmUgdG8gbWFrZSBpdCBlYXNpZXIgdG8gY3JlYXRlIHBsYXllciBjaGFyYWN0ZXJzXHJcbiAgICBwbGF5ZXJCb2R5LnJvdGF0ZUJvZHkobmV3IGYuVmVjdG9yMygwLCB5VHVybiAqIHR1cm5pbmdzcGVlZCAqIF9kZWx0YVRpbWUsIDApKTtcclxuXHJcbiAgICBsZXQgbW92ZW1lbnRWZWxvY2l0eTogZi5WZWN0b3IzID0gbmV3IGYuVmVjdG9yMygpO1xyXG4gICAgbW92ZW1lbnRWZWxvY2l0eS54ID0gcGxheWVyRm9yd2FyZC54ICogZm9yd2FyZE1vdmVtZW50ICogbW92ZW1lbnRzcGVlZDtcclxuICAgIG1vdmVtZW50VmVsb2NpdHkueSA9IHBsYXllckJvZHkuZ2V0VmVsb2NpdHkoKS55O1xyXG4gICAgbW92ZW1lbnRWZWxvY2l0eS56ID0gcGxheWVyRm9yd2FyZC56ICogZm9yd2FyZE1vdmVtZW50ICogbW92ZW1lbnRzcGVlZDtcclxuICAgIHBsYXllckJvZHkuc2V0VmVsb2NpdHkobW92ZW1lbnRWZWxvY2l0eSk7XHJcbiAgICAvL1NpbmNlIHdlIGFyZSByZXNldHRpbmcgdGhlIHZlbG9jaXR5IHdoZW4gcmVsZWFzaW5nIHRoZSBrZXkgdG8gaGF2ZSBhIGluc3RhbnQgc3RvcCBvdXIgcGxheWVyIGlzIG5vdCBhYmxlIHRvIHNsaWRlLiBXZSB3b3VsZCBoYXZlXHJcbiAgICAvL3RoZSBwbGF5ZXIgZmFkZSBvdXQgaGF2ZSBzbGlkaW5nIGluc3RlYWQgeW91IG5lZWQgdG8gY29uZmlndXJlIHRoYXQgZm9yIHlvdXIgb3duIGdhbWUuXHJcbiAgfVxyXG5cclxufSJdfQ==